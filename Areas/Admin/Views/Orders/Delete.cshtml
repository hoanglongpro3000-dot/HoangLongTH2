@model HoangLongTH.Models.Order

@{
    ViewBag.Title = "Xóa đơn hàng";
    Layout = "~/Areas/Admin/Views/Shared/_AdminLayout.cshtml";

    string paymentText = Model.PaymentStatus;
    string paymentClass = "badge-unpaid";

    if (paymentText == "Đã thanh toán" || paymentText == "Paid")
    {
        paymentClass = "badge-paid";
        paymentText = "Đã thanh toán";
    }
    else if (paymentText == "Chờ xử lý" || paymentText == "Pending")
    {
        paymentClass = "badge-pending";
        paymentText = "Chờ xử lý";
    }
    else
    {
        paymentText = "Chưa thanh toán";
    }
}

<style>
    .badge-paid {
        background-color: #198754;
    }

    .badge-unpaid {
        background-color: #dc3545;
    }

    .badge-pending {
        background-color: #ffc107;
        color: #000;
    }

    .order-label {
        font-weight: 600;
        color: #495057;
    }

    .order-value {
        color: #212529;
    }

    .danger-note {
        background: #fff3cd;
        border-radius: 8px;
        padding: 10px 14px;
        font-size: 14px;
        border: 1px solid #ffeeba;
        color: #856404;
    }
</style>

<div class="container mt-5">
    <div class="row justify-content-center">
        <div class="col-lg-8">
            <div class="card shadow border-0">
                <div class="card-header bg-danger text-white d-flex justify-content-between align-items-center">
                    <div>
                        <h4 class="mb-0">
                            <i class="bi bi-exclamation-triangle-fill me-2"></i>
                            Xác nhận xóa đơn hàng
                        </h4>
                        <small class="d-block mt-1">Bạn không thể khôi phục sau khi xóa.</small>
                    </div>
                    <span class="badge bg-light text-danger">
                        Mã đơn: @Model.OrderID
                    </span>
                </div>

                <div class="card-body">
                    <div class="danger-note mb-4">
                        <strong>Lưu ý:</strong> Hành động này sẽ xóa vĩnh viễn đơn hàng khỏi hệ thống.
                        Hãy kiểm tra kỹ thông tin trước khi xác nhận.
                    </div>

                    <div class="row g-4">
                        <!-- Thông tin đơn hàng -->
                        <div class="col-md-6">
                            <h5 class="mb-3 text-primary">
                                <i class="bi bi-receipt-cutoff me-1"></i> Thông tin đơn hàng
                            </h5>

                            <p>
                                <span class="order-label">Ngày đặt:</span><br />
                                <span class="order-value">
                                    @Model.OrderDate.ToString("dd/MM/yyyy HH:mm")
                                </span>
                            </p>

                            <p>
                                <span class="order-label">Tổng tiền:</span><br />
                                <span class="order-value text-success fw-bold">
                                    @String.Format("{0:N0} ₫", Model.TotalAmount)
                                </span>
                            </p>

                            <p>
                                <span class="order-label">Trạng thái thanh toán:</span><br />
                                <span class="badge @paymentClass mt-1">
                                    @paymentText
                                </span>
                            </p>

                            <p>
                                <span class="order-label">Địa chỉ giao hàng:</span><br />
                                <span class="order-value">
                                    @Model.AddressDelivery
                                </span>
                            </p>
                        </div>

                        <!-- Thông tin khách hàng -->
                        <div class="col-md-6">
                            <h5 class="mb-3 text-primary">
                                <i class="bi bi-person-badge me-1"></i> Thông tin khách hàng
                            </h5>

                            <p>
                                <span class="order-label">Mã khách hàng:</span><br />
                                <span class="order-value">
                                    @Model.CustomerID
                                </span>
                            </p>

                            <p>
                                <span class="order-label">Tên khách hàng:</span><br />
                                <span class="order-value">
                                    @Model.Customer?.CustomerName ?? "Không có thông tin"
                                </span>
                            </p>

                            @* Nếu trong Customer có Email / Phone thì bật 2 đoạn dưới lên *@
                            @*<p>
                                    <span class="order-label">Email:</span><br />
                                    <span class="order-value">
                                        @Model.Customer?.Email
                                    </span>
                                </p>

                                <p>
                                    <span class="order-label">Số điện thoại:</span><br />
                                    <span class="order-value">
                                        @Model.Customer?.Phone
                                    </span>
                                </p>*@
                        </div>
                    </div>
                </div>

                <div class="card-footer d-flex justify-content-between align-items-center">
                    <span class="text-muted">
                        Bạn chắc chắn muốn xóa đơn hàng này?
                    </span>

                    @using (Html.BeginForm())
                    {
                        @Html.AntiForgeryToken()
                        @Html.HiddenFor(m => m.OrderID)

                        <div>
                            <button type="submit" class="btn btn-danger me-2">
                                <i class="bi bi-trash3-fill me-1"></i> Xóa đơn hàng
                            </button>
                            @Html.ActionLink("Hủy, quay lại danh sách", "Index", null, new { @class = "btn btn-secondary" })
                        </div>
                    }
                </div>
            </div>
        </div>
    </div>
</div>
